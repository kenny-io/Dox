# Messages API

Call the unified messaging endpoint to reach SMS, email, and push targets with a single payload. Each request is idempotent based on the `messageId`.

## Send a message

```bash
curl -X POST https://api.dox.dev/v1/messages \
  -H "Authorization: Bearer $DOX_TOKEN" \
  -H "Idempotency-Key: msg-123" \
  -d '{
        "to": { "phone": "+15551234567" },
        "template": "password-reset",
        "data": { "code": "493201" }
      }'
```

<Note type="info" title="Rate limiting">
Messages are limited to 50 requests per second per workspace. Exceeding the quota yields HTTP 429 with a `Retry-After` header.
</Note>

## Request body

| Field           | Type     | Description                                |
| --------------- | -------- | ------------------------------------------ |
| `to`            | object   | One of `phone`, `email`, or `deviceToken`. |
| `template`      | string   | Identifier of the template to render.      |
| `data`          | object   | Arbitrary JSON data merged into the template context. |
| `metadata`      | object   | Optional key/value map for analytics.      |

## Sample response

```json
{
  "id": "msg_43af",
  "status": "queued",
  "channel": "sms",
  "provider": "twilio",
  "createdAt": "2024-12-06T10:31:21.000Z"
}
```


